(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-03f11554"],{7189:function(t,e,s){},"8bb5":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"gd-chatlist-main"},[s("div",{staticClass:"gd-chatlist-w"},[s("div",{staticClass:"gd-chatlist-left"},[s("div",{staticClass:"gd-chatlist-height"},[s("p",[t._v("新的朋友")]),s("p",{staticClass:"gd-chatlist-height-pl",class:{bgActive:0==t.bgcolor},on:{click:t.handleAdd}},[s("span",{staticClass:"icon iconfont",staticStyle:{"font-size":"40px",color:"#FA9D3B"}},[t._v("")]),t._v("新的朋友 ")])]),s("div",{staticClass:"gd-chatlist-height gd-chatlist-height-s"},[s("p",[t._v("群组")]),t._l(t.groupBookList,(function(e,n){return s("p",{staticClass:"gd-chatList-list",class:{bgActiveG:e.rcGroupId==t.rcGroupSelected},on:{click:function(s){return t.handleGroupList(e)}}},[s("img",{attrs:{src:e.headAddr?e.headAddr:"https://dss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=3491929439,4106440758&fm=26&gp=0.jpg",onerror:"this.src='https://dss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=3491929439,4106440758&fm=26&gp=0.jpg'",alt:""}}),s("span",[t._v(t._s(e.name))])])}))],2),s("div",{staticClass:"gd-chatlist-height gd-chatlist-height-s"},[s("p",[t._v("好友")]),t._l(t.chatFriendList,(function(e,n){return s("p",{staticClass:"gd-chatList-list",class:{bgActives:e.rcId==t.chatUserSelected},on:{click:function(s){return t.handleFriendList(e)}}},[s("img",{attrs:{src:e.headAddr,onerror:"this.src='https://dss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=3491929439,4106440758&fm=26&gp=0.jpg'",alt:""}}),s("span",[t._v(t._s(e.nickname))])])}))],2)]),s("div",{staticClass:"gd-chatlist-right"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.stateFriend,expression:"stateFriend"}],staticClass:"gd-chatlist-right-add"},[s("p",{staticClass:"gd-chatlist-right-addfre"},[t._v("新的朋友")]),t._l(t.chatFriendStateList,(function(e,n){return s("div",{staticClass:"gd-chatlist-right-list"},[s("img",{attrs:{src:e.sendHeadAddr,alt:""}}),s("div",{staticClass:"gd-chatlist-right-name"},[s("p",[t._v(t._s(e.sendNickname))]),s("p",[t._v(t._s(e.greetSb))])]),2!=e.state&&3!=e.state?s("el-button",{on:{click:function(s){return t.handleConsent(e)}}},[t._v("同意")]):t._e(),3!=e.state&&2!=e.state?s("el-button",{on:{click:function(s){return t.handleRefuse(e)}}},[t._v("拒绝")]):t._e(),2==e.state?s("p",{staticStyle:{color:"#666","font-size":"13px"}},[t._v("已同意")]):t._e(),3==e.state?s("p",{staticStyle:{color:"#666","font-size":"13px"}},[t._v("已拒绝")]):t._e()],1)}))],2),s("div",{directives:[{name:"show",rawName:"v-show",value:t.friendList,expression:"friendList"}],staticClass:"gd-chatlist-right-add gd-chatlist-right-ml"},[s("p",{staticClass:"gd-chatlist-group-name"},[t._v("好友")]),s("p",{staticClass:"gd-chatlist-right-username"},[s("img",{attrs:{src:t.chatFriendUserInfo.headAddr,alt:""}}),t._v(" "+t._s(t.chatFriendUserInfo.nickname)+" ")]),s("p",{staticStyle:{color:"#666","margin-top":"20px"}},[t._v("rcId:"+t._s(t.chatFriendUserInfo.rcId))]),s("el-button",{on:{click:t.handleSendMsg}},[t._v("发消息")])],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.groupShow,expression:"groupShow"}],staticClass:"gd-chatlist-right-add gd-chatlist-right-ml"},[s("p",{staticClass:"gd-chatlist-group-name"},[t._v(t._s(t.groupInfo.name)+"("+t._s(t.groupInfoList.length)+")")]),s("div",{staticClass:"gd-chatlist-right-group",staticStyle:{"margin-top":"100px"}},t._l(t.groupInfoList,(function(e,n){return s("p",{staticClass:"gd-chatlist-right-group-p"},[s("img",{attrs:{src:e.headAddr,alt:""}}),s("span",[t._v(t._s(e.nickname))])])})),0),s("el-button",{on:{click:t.handleGroupSendMsg}},[t._v("发消息")])],1)])])])},i=[],r=(s("d81d"),s("b0c0"),s("96cf"),s("1da1")),a=s("5530"),c=s("ad8f"),d=s("2f62"),o={computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(d["d"])(["userInfo"])),Object(d["d"])("rongIm",["rongUser","rongMessage","rongConversation","conversationUser"])),{},{chatFriendList:function(){return this.rongUser.addressBook},chatUserList:function(){return this.rongConversation.conversationList},rongUserInfo:function(){return this.rongUser.rongUser},groupBookList:function(){return this.rongUser.groupBook}}),data:function(){return{groupShow:!1,bgcolor:0,stateFriend:!0,friendList:!1,chatFriendStateList:[],chatFriendUserInfo:[],chatUserSelected:0,rcGroupSelected:0,consentState:0,groupInfoList:[],groupInfo:0}},created:function(){this.handleFriend(),this.handleStateFriend()},methods:{handleGroupSendMsg:function(){var t=this.groupInfo,e={targetId:t.rcGroupId,senderUserId:t.rcGroupId,type:3,latestMessage:{sentTime:(new Date).getTime(),content:{content:"",idx:t.id,state:t.state,user:{id:t.rcGroupId,name:t.name,portrait:t.headAddr}}}},s=this.chatUserList;s.unshift(e),this.$store.dispatch("rongIm/conversation/getSendConversationList",s),this.$router.push({name:"Chats",query:{idx:t.rcId}})},handleSendMsg:function(){var t=this.chatFriendUserInfo,e={targetId:t.rcId,senderUserId:this.userInfo.rcId,type:1,latestMessage:{sentTime:(new Date).getTime(),content:{content:t.greetSb,user:{id:t.rcId,name:t.nickname,portrait:t.headAddr}}}},s=this.chatUserList;s.unshift(e),this.$store.dispatch("rongIm/conversation/getSendConversationList",s),this.$router.push({name:"Chats",query:{idx:t.rcId}})},handleGroupList:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function s(){var n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return console.log(t),e.stateFriend=!1,e.friendList=!1,e.bgcolor=1,e.chatUserSelected=1,e.rcGroupSelected=t.rcGroupId,e.groupInfo=t,e.groupShow=!0,s.prev=8,s.next=11,e.$ajax.rongCloud.getGroupInfoList(t.rcGroupId);case 11:n=s.sent,e.groupInfoList=n.result,s.next=17;break;case 15:s.prev=15,s.t0=s["catch"](8);case 17:case"end":return s.stop()}}),s,null,[[8,15]])})))()},handleFriend:function(){var t=this;Object(c["e"])().then((function(e){var s=[];e.result.map((function(e){e.sendNickname!==t.rongUserInfo.nickname&&s.push(e)})),console.log(s),t.chatFriendStateList=s}))},handleAdd:function(){this.stateFriend=!0,this.friendList=!1,this.bgcolor=0,this.chatUserSelected=0,this.rcGroupSelected=0,this.groupShow=!1},handleFriendList:function(t){this.stateFriend=!1,this.friendList=!0,this.bgcolor=1,this.rcGroupSelected=0,this.chatUserSelected=t.rcId,this.chatFriendUserInfo=t},handleStateFriend:function(){},handleConsent:function(t){var e=this,s=(t.id,2),n=this;console.log(t),Object(c["d"])({receiptId:t.receiptId,sendId:t.sendId,greetSb:t.greetSb,id:t.id,receiptHeadAddr:t.receiptHeadAddr,receiptNickname:t.receiptNickname,sendHeadAddr:t.sendHeadAddr,sendNickname:t.sendNickname,state:s}).then((function(t){e.$store.dispatch("rongIm/user/getFriendList"),n.handleFriend()}))},handleRefuse:function(t){var e=this,s=(t.id,3);Object(c["d"])({receiptId:t.receiptId,sendId:t.sendId,greetSb:t.greetSb,id:t.id,receiptHeadAddr:t.receiptHeadAddr,receiptNickname:t.receiptNickname,sendHeadAddr:t.sendHeadAddr,sendNickname:t.sendNickname,state:s}).then((function(t){e.handleFriend()}))}}},h=o,l=(s("b401"),s("2877")),u=Object(l["a"])(h,n,i,!1,null,null,null);e["default"]=u.exports},b401:function(t,e,s){"use strict";var n=s("7189"),i=s.n(n);i.a}}]);