(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bfc2eb96"],{"283f":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAACE0lEQVQ4T63TT2jTUBwH8O8vWdd/rjbaoYKyi6I3hV28edCDMJamwi7uKoIgyFDqtIkG21lBpjcPHsS7MLop7jBQrx5Er+IuQinobBOHrFu7vZ8kUk3SdrOs7xTyvvnk/X7vPbJy6TlIlEHXwZtJeT6Myqj888DhVQZFtskuU+X6eCoak+fACLcFCYcAHIEMhXkzQWLgK4AyGJX2LJ8AKEHOBF8eDdHTD81gyDbS0wwqOiCtN4lDoRoYd5RCKR/MWob2DsAZF2wNe3pMwYB8iYW0pNwvffKCXP/FNLjHboGWkTlJLM7LW41nQ8XFlY4gT01ErXjjDYGGlULp6Lagrn0E4RSxyCYLCw87gm755sSg3dy4qswsPNoBvAfCRQk8uTc//74r6GuBp4fBkv+rh8FQzcjMEPi2b5cZrwh4HcwyMAXCMd+mdDpfVT29tO/zl7HlgyM0nAyvMSB1O4cENHYEvR+vZNWhiNyMzBYXqyYgWnNO33+sbaRSsdXvPYEMkHXzXML7EyWq1Ml80WBzPAbzZb0n0NbVJ0zSFV/JjBtKoTRrGdpbAp/uCXSgqqHlJUD/i/4D229K90vvn7F0zQThrvu2H6Dj1AwtS8wPQFQG8zcAxwGK91yyd62Wrl4D6DGIXIfA67sCHcTKXRgRYivuPIcgxK7B1orLt87ul8KxP0vtx6jl1EmS6HnfQLd8XVV/A1Y18zlGbVUZAAAAAElFTkSuQmCC"},"5eb7":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAfCAYAAACRdF9FAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkIyQjBGQTg0QkRCMzExRUE4MkRCQUYwQ0E2MERFNDM4IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkIyQjBGQTg1QkRCMzExRUE4MkRCQUYwQ0E2MERFNDM4Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QjJCMEZBODJCREIzMTFFQTgyREJBRjBDQTYwREU0MzgiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QjJCMEZBODNCREIzMTFFQTgyREJBRjBDQTYwREU0MzgiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4zBpC+AAACHElEQVR42syYT0gUURzH346rSRu4EpR46BBCHTp3DxYkr9UhKAksDOrQIZDAS0jspUuXggwRLDp4kMiD1UEQuiitmIjQISKwWmEJFmt31d3p+6vvyk+ZibZ5474vfHDmvZ3x8/7NvtmEfzuTMMa0AA9sAd/8SRs4C/rAMXAEdICDIAUOqOsSJGqqIA/egifgdb3C49/aHknJJpgBc+AnKJOakqp/3oakYcO7wQXwCkyww3aJ+gEXVsAkW1YNEDQh19nKJfD4d09g6P/1ona2Lq2G20Zvpuq9xpwAd8ApVZZpRHQ/cwgsgJM8f5Fs8AYJLqh0hB4tchrpyPrYUOdyPAKe8fx0o6IyH3+Am2BYrXovYg/6XAcDYI1lq6r+6P/8A2l9li2uWhpqGZVeMKbKttWx50V43t0DdyluK2fCKqIOWZZToGJJtDUuUcl9MMQviNjiWbrPA3ArTlnP4r0egUGL0yA2Uck4uApKrotKnvJ5WHRdVPKcPVtwXdRw13UNfHNdVDJF2S+ui0qmwRXw2XVRyRvKfnJdVDLLHfsH10UNX9ougxXXRSXzoB8sBdTlXRKV5Cj7TpXVuBMLTNI0L+/5m8F50MVH2aKq71THpWaKStbBw5C6c+r4Y7NFw15L5Ov3hip76ZLoYcrJU6FHlX+XzbnnkKhsYEbBsiorcw4XXBv6r+A6Xx6Pc5+Qa/aq/9sCu0jZnd+1fgkwAAqHb09Vu9YVAAAAAElFTkSuQmCC"},"6a53":function(e,t,n){},"7e07":function(e,t,n){"use strict";var i=n("d16af"),r=n.n(i);r.a},9533:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"login-content"},[i("div",{staticClass:"gd-home-login-to"},[i("span",[e._v("扫码登录更方便")]),i("img",{attrs:{src:n("283f")},on:{click:function(t){return e.handleShow(0)}}})]),i("div",{staticClass:"gd-home-login-to"},[e._v("手机验证码登录")]),i("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":""}},[i("el-form-item",{attrs:{prop:"phone"}},[i("el-input",{attrs:{placeholder:"请输入手机号"},model:{value:e.ruleForm.phone,callback:function(t){e.$set(e.ruleForm,"phone",t)},expression:"ruleForm.phone"}})],1),i("el-form-item",{staticClass:"gd-home-login-col",attrs:{prop:"verifyCode"}},[i("el-input",{attrs:{type:"text",placeholder:"请输入验证码",autocomplete:"off"},model:{value:e.ruleForm.verifyCode,callback:function(t){e.$set(e.ruleForm,"verifyCode",t)},expression:"ruleForm.verifyCode"}}),e.sendAuthCode?i("el-button",{staticClass:"el-button-btn",attrs:{type:"primary"},on:{click:e.submitCode}},[e._v("获取验证码 ")]):i("el-button",{staticClass:"auth_text el-button-btn",attrs:{type:"primary"}},[e._v(e._s(e.auth_time)+"秒后重发")])],1),i("el-button",{staticClass:"gd-home-btn",attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("登录")]),e.dialogSoft?i("div",{staticClass:"gd-home-login-code",on:{click:function(t){return e.handleShow(1)}}},[i("div",{ref:"qrcode",staticStyle:{width:"185px",height:"169px"},attrs:{id:"qrcode"}}),i("p",{staticStyle:{color:"rgb(238, 124, 81)","font-weight":"bold"}},[e._v("打开金塑宝app")]),i("p",[e._v("扫一扫登录")])]):e._e(),e.dialogWeChat?i("div",{staticClass:"gd-login-wchat"},[i("img",{attrs:{src:n("5eb7"),alt:""},on:{click:function(t){return e.handleShow(2)}}}),i("div",{staticClass:"gd-login-wchat-top"},[i("wx-login",e._b({attrs:{href:"data:text/css;base64,LmltcG93ZXJCb3ggLnRpdGxlIHsNCiAgZGlzcGxheTogbm9uZTsNCn0NCi5pbXBvd2VyQm94IC5zdGF0dXMuc3RhdHVzX2Jyb3dzZXIgew0KICBkaXNwbGF5OiBub25lOw0KfQ0KLmltcG93ZXJCb3ggLnFyY29kZSB7DQogIGJvcmRlcjogbm9uZTsNCiAgd2lkdGg6IDIwMHB4Ow0KICBoZWlnaHQ6IDIwMHB4Ow0KfQ0KLmltcG93ZXJCb3ggLnN0YXR1c3sNCiAgZGlzcGxheTogbm9uZQ0KfQ=="}},"wx-login",e.wxLoginParams,!1))],1),i("p",[e._v("微信扫码登录快捷")])]):e._e()],1),i("div",{staticClass:"gd-home-login-btm"},[i("div",{staticClass:"gd-home-login-bo"},[i("span"),i("span",{on:{click:function(){e.$router.push({name:"Register"})}}},[e._v("注册新账号")])]),i("div",{staticClass:"gd-home-login-mr"},[i("el-divider",[e._v("第三方登录")])],1),i("div",{staticClass:"gd-home-login-third"},[i("img",{attrs:{src:n("ee38"),alt:""},on:{click:function(t){return e.handleShow(3)}}})])]),i("wei-xin-register-dialog",{ref:"weiXinRegisterDialog",on:{submit:e.emitAfterLogin}}),i("phone-register-dialog",{ref:"phoneRegisterDialog",on:{submit:e.emitAfterLogin}})],1)},r=[],o=(n("b64b"),n("96cf"),n("1da1")),a=n("5530"),s=n("e521"),c=n("2f62"),l=n("5069"),u=n("dc28"),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"gd-phone-register"},[n("el-dialog",{attrs:{title:"当前手机号未注册,请先注册",visible:e.visible,width:"20%","append-to-body":!0},on:{"update:visible":function(t){e.visible=t}}},[n("el-form",{ref:"form",staticClass:"demo-ruleForm gd-demo-ruleForm",attrs:{model:e.form,"status-icon":"",rules:e.rules,"label-width":"100px"}},[n("el-form-item",{attrs:{prop:"nickname",lable:"昵称"}},[n("el-input",{attrs:{placeholder:"用户昵称"},model:{value:e.form.nickname,callback:function(t){e.$set(e.form,"nickname",t)},expression:"form.nickname"}})],1),n("el-button",{staticClass:"gd-home-btn",attrs:{type:"primary"},on:{click:function(t){return e.handleValidate()}}},[e._v("提交")])],1)],1)],1)},g=[],m=n("5d97"),h={name:"PhoneRegisterDialog",components:{},mixins:[m["a"]],props:{},data:function(){return{form:{verifyCode:"",phone:"",nickname:"",appType:1,wxUnionId:"",identificationCode:0},rules:{nickname:[{required:!0,message:"请输入昵称",trigger:"blur"}]}}},computed:{},watch:{},created:function(){},mounted:function(){},destroyed:function(){},methods:Object(a["a"])(Object(a["a"])({},Object(c["c"])("user",["Register"])),{},{handleSubmit:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.Register(e.form);case 2:n=t.sent,n&&(e.$emit("submit",n),e.hide());case 4:case"end":return t.stop()}}),t)})))()}})},A=h,b=(n("7e07"),n("2877")),p=Object(b["a"])(A,d,g,!1,null,null,null),f=p.exports,w=n("ad8f"),v=n("d044"),C=n.n(v),R={name:"LoginContent",components:{QRCode:C.a,wxLogin:l["a"],WeiXinRegisterDialog:u["a"],PhoneRegisterDialog:f},mixins:[s["a"]],props:{},data:function(){return{qrCode:"",dialogVisible:!1,dialogWeChat:!1,dialogSoft:!1,sendAuthCode:!0,auth_time:0,wx_auth_time:0,ruleForm:{phone:"",verifyCode:"",appType:"1",loginType:"1"},rules:{phone:[{required:!0,message:"请输入账号",trigger:"blur"},{pattern:/^1[3456789]\d{9}$/,message:"您输入正确的手机号码",trigger:"blur"}],verifyCode:[{required:!0,message:"请输入验证码",trigger:"blur"}]},wxLoginParams:{redirect_uri:encodeURIComponent(window.location.href),appid:"wxe4cd6faf73a4952f",scope:"snsapi_login",theme:"black",rel:"external nofollow"}}},computed:{},watch:{},created:function(){},mounted:function(){this.$route.query.code&&!this.token&&0===Object.keys(this.userInfo).length&&this.wxLogin()},destroyed:function(){},methods:Object(a["a"])(Object(a["a"])({},Object(c["c"])("user",["Login","WxLogin","qrLogin"])),{},{submitCode:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.ruleForm.validateField("phone",function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(n){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!==n){t.next=13;break}return t.prev=1,t.next=4,e.$ajax.user.loginCode({phone:e.ruleForm.phone});case 4:i=t.sent,e.$message.success(i.message+i.result),e.sendAuthCode=!1,e.auth_time=60,e.countDown(),t.next=13;break;case 11:t.prev=11,t.t0=t["catch"](1);case 13:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)})))()},countDown:function(){var e=this;setTimeout((function(){e.auth_time?(e.auth_time--,e.countDown()):e.sendAuthCode=!0}),1e3)},submitForm:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(n){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!n){e.next=7;break}return e.next=3,t.Login(t.ruleForm);case 3:i=e.sent,i.result&&0===i.result.registerState?t.$refs.phoneRegisterDialog.edit(t.ruleForm):t.$emit("afterLogin",i),e.next=9;break;case 7:return console.log("error submit!!"),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},wxLogin:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.WxLogin({appId:"wxe4cd6faf73a4952f",secret:"ed6deab4586f40c9a1f9cd4c7c05e88d",code:e.$route.query.code,grantType:"authorization_code"});case 2:n=t.sent,console.log(n),0===n.result.bindState?e.$refs.weiXinRegisterDialog.edit(n.result):e.emitAfterLogin(n);case 5:case"end":return t.stop()}}),t)})))()},emitAfterLogin:function(e){this.$emit("afterLogin",e)},handleQrcode:function(e){var t=this,n=this;e=this.qrCode;this.$nextTick((function(){var n=t.$refs.qrcode;new C.a(n,{text:"jinsubao://qrLogin?identifier="+e,width:168,height:168,colorDark:"#333",colorLight:"#ffffff"})}));var i={identifier:n.qrCode};n.screenPolling(i)},handleShow:function(e){var t=this;switch(e){case 0:this.dialogSoft=!this.dialogSoft,console.log(this.dialogSoft),0==this.dialogSoft?document.getElementById("qrcode").innerHTML="":Object(w["u"])().then((function(e){var n=e;200===n.code&&(t.qrCode=n.result,t.handleQrcode(n.result))}));break;case 1:this.dialogSoft=!1;break;case 2:this.dialogWeChat=!1;break;case 3:this.dialogWeChat=!0;break}},screenPolling:function(e){var t=this,n=this;window.setTimeout(Object(o["a"])(regeneratorRuntime.mark((function i(){var r,o,a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,t.$ajax.user.qrLogin(e);case 3:if(r=i.sent,!r){i.next=15;break}if(!r.result.phone){i.next=14;break}return o=r,i.next=9,n.qrLogin(o);case 9:a=i.sent,console.log("页面",a),a.result&&0===a.result.registerState?t.$refs.phoneRegisterDialog.edit(o):t.$emit("afterLogin",a),i.next=15;break;case 14:2===r.result.qrLoginIdState||0===r.result.qrLoginIdState?Object(w["u"])().then((function(e){n.screenPolling({identifier:e.result}),n.qrCode=e.result,document.getElementById("qrcode").innerHTML="",n.handleQrcode(e.result)})):n.screenPolling(e);case 15:i.next=19;break;case 17:i.prev=17,i.t0=i["catch"](0);case 19:case"end":return i.stop()}}),i,null,[[0,17]])}))),3e3)}})},I=R,k=(n("c798"),Object(b["a"])(I,i,r,!1,null,null,null));t["a"]=k.exports},c798:function(e,t,n){"use strict";var i=n("6a53"),r=n.n(i);r.a},d16af:function(e,t,n){},ee38:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAUCAYAAABmvqYOAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjE2NTFDNURFQkRBMzExRUFBNDUxQjdCOTVEMDMyMzU1IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjE2NTFDNURGQkRBMzExRUFBNDUxQjdCOTVEMDMyMzU1Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MTY1MUM1RENCREEzMTFFQUE0NTFCN0I5NUQwMzIzNTUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MTY1MUM1RERCREEzMTFFQUE0NTFCN0I5NUQwMzIzNTUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz698lARAAABzklEQVR42pyVTShEURTH33s+Q8OUhSLJRxbIwkJ2IllYyEJYaORjIVkoGxZKkrJhRSJFmoSNsJiyUITEQjT5WihFipCPJmbwvzqvTrc3711z61fv/Oe+/9yPc87TNV+3ZjMSgQ7etAiGIcVRoAmsgxcyfSV8oAXEqZrrbOWFwAuKHN65Aq1gW3XlJWBHwViMXLAJ6lTMXWAVJJN2CPrBgzR3DizTcyxYAPlO5p0gnWl9YASsMe2CztvDtAQwZGceDeolbZwulG87D0yCJIofwRmIoSQIhbvQwD8y4JiO7AZUgCzwA84pm67llX8rGs+DYTABKi1+D1G29dDO/s78RMF4C4yB/TDGZo00gwOQYZp7HYzFznrBCnCTJo7hjs0RKz2l52yaawjzKeC3Md+j/M9hWg1oY/EA1UqA4lJQZZBQC25tzMslbQPMsniQjiOeadUGK+ky8GRhLracImmieNJYnAqKpTlu3riCVKXPlFb3pGeCywiaop83Lg+taJT+wKxCkWIF1BZ0ReN30YO4ueGQ89OgXdG8A8wYUsrZjS6w5DAnaBpbfSzsxidoAI1gV+onH5T3Qlu0+lj8d7ioEr+op4j7EGZHVNHarwADAAg2ZnkwgvL/AAAAAElFTkSuQmCC"}}]);