(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-32558d1c"],{"4ec9":function(e,t,r){"use strict";var a=r("6d61"),n=r("6566");e.exports=a("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),n)},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,r){var a=r("1d80"),n=r("5899"),i="["+n+"]",o=RegExp("^"+i+i+"*"),s=RegExp(i+i+"*$"),l=function(e){return function(t){var r=String(a(t));return 1&e&&(r=r.replace(o,"")),2&e&&(r=r.replace(s,"")),r}};e.exports={start:l(1),end:l(2),trim:l(3)}},"5c14":function(e,t,r){"use strict";r.r(t);for(var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"gd-purOrder-main"},[r("el-tabs",{staticStyle:{height:"auto"},attrs:{"tab-position":e.tabPosition},on:{"tab-click":e.tabClick}},[r("el-tab-pane",{attrs:{name:"",label:"所有订单"}}),r("el-tab-pane",{attrs:{name:"2",label:"待签署合同"}}),r("el-tab-pane",{attrs:{name:"3",label:"待付款"}}),r("el-tab-pane",{attrs:{name:"4",label:"待发货"}}),r("el-tab-pane",{attrs:{name:"5",label:"待收货"}}),r("el-tab-pane",{attrs:{name:"xxxx",label:"退款退货"}}),r("div",{staticClass:"gd-purOrder-hian"},[r("div",{staticClass:"gd-purOrder-search"},[r("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.queryParams}},[r("el-form-item",{attrs:{label:"产品名称"}},[r("el-input",{attrs:{placeholder:"输入品牌名称"},model:{value:e.queryParams.goodsName,callback:function(t){e.$set(e.queryParams,"goodsName",t)},expression:"queryParams.goodsName"}})],1),r("el-form-item",{attrs:{label:"时间"}},[r("el-date-picker",{attrs:{"value-format":"timestamp",type:"datetime",placeholder:"选择日期时间",align:"right","picker-options":e.pickerOptions},model:{value:e.queryParams.time,callback:function(t){e.$set(e.queryParams,"time",t)},expression:"queryParams.time"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.getOrderList}},[e._v("查询")])],1)],1)],1),r("el-button",[e._v("批量删除")]),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"45"}}),r("el-table-column",{attrs:{label:"订单编号",prop:"orderNumber",width:"180"}}),r("el-table-column",{attrs:{label:"产品图片",width:"80"},scopedSlots:e._u([{key:"default",fn:function(e){return[r("div",{staticClass:"gd-purOrder-title"},[r("img",{attrs:{src:e.row.orderItemVos[0].picUrl,alt:""}})])]}}])}),r("el-table-column",{attrs:{prop:"orderItemVos[0].name",label:"产品名称","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{prop:"totalPrice",label:"交易金额","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{prop:"orderItemVos[0].specification",width:"200",label:"类型"}}),r("el-table-column",{attrs:{prop:"createTime",label:"交易时间",width:"150",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("moment")(t.row.createTime))+" ")]}}])}),r("el-table-column",{attrs:{prop:"orderItemVos[0].num",label:"数量",width:"80",sortable:"","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{prop:"buyerSignState",label:"合同",width:"120",sortable:"","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.buyerSignState?r("p",{staticClass:"gd-badgecom-row"},[r("span",{staticClass:"gd-badgecom-staypay"}),e._v("待签署")]):e._e(),1===t.row.buyerSignState?r("p",{staticClass:"gd-badgecom-row"},[r("span",{staticClass:"gd-badgecom-delivery"}),e._v("买家已签署 ")]):e._e()]}}])}),r("el-table-column",{attrs:{prop:"orderState",label:"状态",width:"80",sortable:"","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[r("p",{staticClass:"gd-badgecom-row"},[r("span",{class:e._f("orderStyleState")(t.row.orderState)}),e._v(" "+e._s(e._f("orderState")(t.row.orderState))+" ")])]}}])}),r("el-table-column",{attrs:{prop:"remark",label:"备注","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{label:"操作",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticClass:" gd-purOrder-btn"},[1==t.row.orderState?r("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(r){return e.handleCreate(t.row.id,t.row)}}},[e._v("生成 ")]):e._e(),1!==t.row.buyerSignState&&2==t.row.orderState?r("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(r){return e.handleEdit(t.row.id,t.row)}}},[e._v("签署 ")]):e._e(),r("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(r){return e.handlePay(t.row.id,t.row)}}},[e._v("支付 ")]),r("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(r){return e.handleDetail(t.row.id,t.row)}}},[e._v("查看 ")]),r("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(r){return e.handleDelete(t.$index,t.row)}}},[e._v("删除 ")])],1)]}}])})],1),r("div",{staticClass:"gd-purOrder-footer"},[r("el-pagination",{attrs:{background:"","current-page":e.queryParams.queryParams,"page-sizes":[10,20,50],"page-size":e.queryParams.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.result.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),r("el-dialog",{staticStyle:{height:"100vh"},attrs:{title:"合同签署",visible:e.centerDialogVisible,width:"80%","before-close":e.handleClose,"close-on-click-modal":!1,"close-on-press-escape":!1,center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%",height:"100%"}},[r("iframe",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.contractUrl}}),r("p",{directives:[{name:"show",rawName:"v-show",value:e.contractHide,expression:"contractHide"}],staticClass:"gd-purOrder-contract-count"},[e._v("稍等一下，正在查询合同是否签署成功"+e._s(e.contractCount)+"秒")])])])],1),r("div",[r("el-dialog",{attrs:{title:"选择合同签署类型",visible:e.contractSign,width:"20%","before-close":e.handleSignClose},on:{"update:visible":function(t){e.contractSign=t}}},[r("el-select",{attrs:{placeholder:"请选择合同类型"},on:{change:e.handleContractType},model:{value:e.convalue,callback:function(t){e.convalue=t},expression:"convalue"}},e._l(e.contractType,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.contractSign=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.handleContractSign}},[e._v("确 定")])],1)],1)],1)],1)},n=[],i=(r("4160"),r("b0c0"),r("a9e3"),r("159b"),r("96cf"),r("1da1")),o=r("e521"),s=(r("4ec9"),r("d3b7"),r("3ca3"),r("ddb0"),["待生成合同","待签署","待支付","待发货","待收货","完成","订单超时未支付自动取消","卖家已取消","买家已取消","订单已手动取消","删除订单"]),l=new Map,c=0;c<s.length;c++)l.set(c+1,s[c]);for(var u=["gd-badgecom-staypay","gd-badgecom-already","gd-badgecom-staypay","gd-badgecom-already","gd-badgecom-stay","gd-badgecom-delivery","gd-badgecom-already","gd-badgecom-already","gd-badgecom-already","gd-badgecom-already","gd-badgecom-already"],d=new Map,f=0;f<u.length;f++)d.set(f+1,s[f]);var p={filters:{orderState:function(e){return l.get(1*e)},orderStyleState:function(e){return d.get(1*e)}}},g=r("ad8f"),h={mixins:[o["a"],p],data:function(){return{convalue:"",signType:"",contractSign:!1,contractOrder:0,tableLoading:!1,queryParams:{pageNum:1,pageSize:10,orderState:"",signState:""},contractType:[{value:"1",label:"个人"},{value:"2",label:"企业"}],tabPosition:"top",currentPage4:4,pickerOptions:{shortcuts:[{text:"今天",onClick:function(e){e.$emit("pick",new Date)}},{text:"昨天",onClick:function(e){var t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}},{text:"一周前",onClick:function(e){var t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",t)}}]},contractUrl:"",contractCount:10,contractHide:!1,orderId:0,orderState:"",centerDialogVisible:!1,result:{},tableData:[],loading:!1,multipleSelection:[]}},computed:{},mounted:function(){this.getOrderList()},methods:{getOrderList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.userInfo.userId){t.next=16;break}return t.prev=1,e.tableLoading=!0,t.next=5,e.$ajax.goodsOrder.gets(e.queryParams);case 5:r=t.sent,e.result=r.result,e.tableData=r.result.list,e.tableLoading=!1,t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),e.tableLoading=!1;case 14:t.next=17;break;case 16:e.$message.warning("请先登录");case 17:case"end":return t.stop()}}),t,null,[[1,11]])})))()},handleSignClose:function(){this.contractSign=!1},handleDetail:function(e){this.$router.push({name:"PurchaseOrderDetail",params:{id:e}})},handleContractType:function(e){this.signType=e,console.log(this.convalue)},tabClick:function(e){var t=this;console.log(e.name),this.queryParams.orderState=e.name,this.$nextTick((function(){t.getOrderList()}))},onSubmit:function(){console.log("submit!")},toggleSelection:function(e){var t=this;e?e.forEach((function(e){t.$refs.multipleTable.toggleRowSelection(e)})):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){this.multipleSelection=e},handleCreate:function(e,t){this.contractSign=!0,this.contractOrder=e},handleContractSign:function(){var e=this;Object(g["b"])({id:this.contractOrder,signType:Number(this.signType)}).then((function(t){e.$message.success("合同生成成功"),e.contractSign=!1,e.getOrderList()}))},handlePay:function(e,t){this.$router.push({name:"OrderPay",params:{goodsName:t.orderItemVos[0].name,serialNumber:t.orderNumber,totalPrice:t.totalPrice}})},handleEdit:function(e,t){var r=this;console.log(e,t),this.orderId=e,Object(g["p"])(e).then((function(e){e.result&&(r.contractUrl=e.result.buyerSignUrl,r.centerDialogVisible=!0)}))},handleClose:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.contractHide=!0,e.contractCount=6,e.countDown(),t.prev=3,t.next=6,Object(g["q"])(e.orderId).then((function(t){200==t.code&&(e.getOrderList(),e.$message.success("签章成功"),e.centerDialogVisible=!1)}));case 6:t.next=15;break;case 8:t.prev=8,t.t0=t["catch"](3),e.getOrderList(),e.contractCount=0,e.loading=!1,e.contractHide=!1,e.centerDialogVisible=!1;case 15:case"end":return t.stop()}}),t,null,[[3,8]])})))()},countDown:function(){var e=this;this.loading=!0,setTimeout((function(){e.contractCount&&(e.contractCount--,e.countDown(),0===e.contractCount&&(e.centerDialogVisible=!1,e.loading=!1,e.contractHide=!1))}),1e3)},handleDelete:function(e,t){console.log(e,t)},handleSizeChange:function(e){var t=this;console.log(e),"sign"===e?this.queryParams.signState=1:(this.queryParams.signState="",this.queryParams.pageSize=e),this.$nextTick((function(){t.getOrderList()}))},handleCurrentChange:function(e){var t=this;this.queryParams.pageNum=e,this.$nextTick((function(){t.getOrderList()}))}}},b=h,m=(r("934c"),r("2877")),v=Object(m["a"])(b,a,n,!1,null,null,null);t["default"]=v.exports},6566:function(e,t,r){"use strict";var a=r("9bf2").f,n=r("7c73"),i=r("e2cc"),o=r("0366"),s=r("19aa"),l=r("2266"),c=r("7dd0"),u=r("2626"),d=r("83ab"),f=r("f183").fastKey,p=r("69f3"),g=p.set,h=p.getterFor;e.exports={getConstructor:function(e,t,r,c){var u=e((function(e,a){s(e,u,t),g(e,{type:t,index:n(null),first:void 0,last:void 0,size:0}),d||(e.size=0),void 0!=a&&l(a,e[c],e,r)})),p=h(t),b=function(e,t,r){var a,n,i=p(e),o=m(e,t);return o?o.value=r:(i.last=o={index:n=f(t,!0),key:t,value:r,previous:a=i.last,next:void 0,removed:!1},i.first||(i.first=o),a&&(a.next=o),d?i.size++:e.size++,"F"!==n&&(i.index[n]=o)),e},m=function(e,t){var r,a=p(e),n=f(t);if("F"!==n)return a.index[n];for(r=a.first;r;r=r.next)if(r.key==t)return r};return i(u.prototype,{clear:function(){var e=this,t=p(e),r=t.index,a=t.first;while(a)a.removed=!0,a.previous&&(a.previous=a.previous.next=void 0),delete r[a.index],a=a.next;t.first=t.last=void 0,d?t.size=0:e.size=0},delete:function(e){var t=this,r=p(t),a=m(t,e);if(a){var n=a.next,i=a.previous;delete r.index[a.index],a.removed=!0,i&&(i.next=n),n&&(n.previous=i),r.first==a&&(r.first=n),r.last==a&&(r.last=i),d?r.size--:t.size--}return!!a},forEach:function(e){var t,r=p(this),a=o(e,arguments.length>1?arguments[1]:void 0,3);while(t=t?t.next:r.first){a(t.value,t.key,this);while(t&&t.removed)t=t.previous}},has:function(e){return!!m(this,e)}}),i(u.prototype,r?{get:function(e){var t=m(this,e);return t&&t.value},set:function(e,t){return b(this,0===e?0:e,t)}}:{add:function(e){return b(this,e=0===e?0:e,e)}}),d&&a(u.prototype,"size",{get:function(){return p(this).size}}),u},setStrong:function(e,t,r){var a=t+" Iterator",n=h(t),i=h(a);c(e,t,(function(e,t){g(this,{type:a,target:e,state:n(e),kind:t,last:void 0})}),(function(){var e=i(this),t=e.kind,r=e.last;while(r&&r.removed)r=r.previous;return e.target&&(e.last=r=r?r.next:e.state.first)?"keys"==t?{value:r.key,done:!1}:"values"==t?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),r?"entries":"values",!r,!0),u(t)}}},"6d61":function(e,t,r){"use strict";var a=r("23e7"),n=r("da84"),i=r("94ca"),o=r("6eeb"),s=r("f183"),l=r("2266"),c=r("19aa"),u=r("861d"),d=r("d039"),f=r("1c7e"),p=r("d44e"),g=r("7156");e.exports=function(e,t,r){var h=-1!==e.indexOf("Map"),b=-1!==e.indexOf("Weak"),m=h?"set":"add",v=n[e],y=v&&v.prototype,w=v,S={},x=function(e){var t=y[e];o(y,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(b&&!u(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return b&&!u(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(b&&!u(e))&&t.call(this,0===e?0:e)}:function(e,r){return t.call(this,0===e?0:e,r),this})};if(i(e,"function"!=typeof v||!(b||y.forEach&&!d((function(){(new v).entries().next()})))))w=r.getConstructor(t,e,h,m),s.REQUIRED=!0;else if(i(e,!0)){var k=new w,C=k[m](b?{}:-0,1)!=k,_=d((function(){k.has(1)})),O=f((function(e){new v(e)})),I=!b&&d((function(){var e=new v,t=5;while(t--)e[m](t,t);return!e.has(-0)}));O||(w=t((function(t,r){c(t,w,e);var a=g(new v,t,w);return void 0!=r&&l(r,a[m],a,h),a})),w.prototype=y,y.constructor=w),(_||I)&&(x("delete"),x("has"),h&&x("get")),(I||C)&&x(m),b&&y.clear&&delete y.clear}return S[e]=w,a({global:!0,forced:w!=v},S),p(w,e),b||r.setStrong(w,e,h),w}},"934c":function(e,t,r){"use strict";var a=r("f7ee"),n=r.n(a);n.a},a9e3:function(e,t,r){"use strict";var a=r("83ab"),n=r("da84"),i=r("94ca"),o=r("6eeb"),s=r("5135"),l=r("c6b6"),c=r("7156"),u=r("c04e"),d=r("d039"),f=r("7c73"),p=r("241c").f,g=r("06cf").f,h=r("9bf2").f,b=r("58a8").trim,m="Number",v=n[m],y=v.prototype,w=l(f(y))==m,S=function(e){var t,r,a,n,i,o,s,l,c=u(e,!1);if("string"==typeof c&&c.length>2)if(c=b(c),t=c.charCodeAt(0),43===t||45===t){if(r=c.charCodeAt(2),88===r||120===r)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:a=2,n=49;break;case 79:case 111:a=8,n=55;break;default:return+c}for(i=c.slice(2),o=i.length,s=0;s<o;s++)if(l=i.charCodeAt(s),l<48||l>n)return NaN;return parseInt(i,a)}return+c};if(i(m,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var x,k=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof k&&(w?d((function(){y.valueOf.call(r)})):l(r)!=m)?c(new v(S(t)),r,k):S(t)},C=a?p(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),_=0;C.length>_;_++)s(v,x=C[_])&&!s(k,x)&&h(k,x,g(v,x));k.prototype=y,y.constructor=k,o(n,m,k)}},bb2f:function(e,t,r){var a=r("d039");e.exports=!a((function(){return Object.isExtensible(Object.preventExtensions({}))}))},f183:function(e,t,r){var a=r("d012"),n=r("861d"),i=r("5135"),o=r("9bf2").f,s=r("90e3"),l=r("bb2f"),c=s("meta"),u=0,d=Object.isExtensible||function(){return!0},f=function(e){o(e,c,{value:{objectID:"O"+ ++u,weakData:{}}})},p=function(e,t){if(!n(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,c)){if(!d(e))return"F";if(!t)return"E";f(e)}return e[c].objectID},g=function(e,t){if(!i(e,c)){if(!d(e))return!0;if(!t)return!1;f(e)}return e[c].weakData},h=function(e){return l&&b.REQUIRED&&d(e)&&!i(e,c)&&f(e),e},b=e.exports={REQUIRED:!1,fastKey:p,getWeakData:g,onFreeze:h};a[c]=!0},f7ee:function(e,t,r){}}]);