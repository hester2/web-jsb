(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-469538f1","chunk-837a9454"],{"03b7":function(t,e,s){},"0753":function(t,e,s){},1439:function(t,e,s){"use strict";var a=s("4b81"),n=s.n(a);n.a},"4b81":function(t,e,s){},"6f29":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"gd-chatIm-main"},[a("div",{staticClass:"gd-chatIm-w",on:{click:function(e){e.stopPropagation(),t.infoShow=!1}}},[a("div",{staticClass:"gd-chatIm-left"},[a("div",{staticClass:"gd-chatIm-left-top"},[a("p",[a("img",{attrs:{src:t.rongUserInfo.portrait,onerror:"this.src='https://dss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=3491929439,4106440758&fm=26&gp=0.jpg'",alt:""}}),t._v(t._s(t.rongUserInfo.nickname))]),a("div",{staticClass:"gd-chatIm-pranf"},[a("span",{staticClass:"icon iconfont",staticStyle:{"margin-right":"10px",cursor:"pointer"},on:{click:t.handleAdd}},[t._v("")]),a("span",{staticClass:"icon iconfont",staticStyle:{cursor:"pointer"}},[t._v("")]),t.modelDiog?a("div",{staticClass:"gd-chatIm-fied"},[a("p",{on:{click:t.handleAddFriend}},[t._v("添加好友")]),a("p",{on:{click:t.handleAddGroup}},[t._v("添加群聊")])]):t._e()])]),a("div",{staticClass:"gd-chart-left gd-chatIm-left-list"},t._l(t.chatUserList,(function(e,n){return a("li",{class:{bgActive:e.targetId==t.chatUserSelected},on:{click:function(s){return t.handleSwitch(e,e.targetId,t.userData[e.targetId])},mouseover:function(e){t.hoverIndex=n},mouseout:function(e){t.hoverIndex=-1}}},[a("img",{staticClass:"gd-chatIm-left-avtar",attrs:{src:t.userData&&t.userData[e.targetId]&&t.userData[e.targetId].portrait?t.userData[e.targetId].portrait:t.imgError,alt:""}}),a("div",{staticClass:"gd-chatIm-left-text"},[a("li",{staticClass:"gd-chatIm-left-name"},[3==e.type?a("p",[t._v(t._s(e.latestMessage.content.user.name))]):t._e(),a("p",[t._v(t._s(t.userData&&t.userData[e.targetId]&&t.userData[e.targetId].name))]),a("p",[t._v(t._s(t._f("formatDate")(e.latestMessage.sentTime)))])]),0!=t.targetCount&&t.newMsg==e.targetId?a("span",{staticClass:"gd-chart-newmsg"},[t._v(t._s(t.targetCount))]):t._e(),a("p",{staticClass:"gd-chart-empty",on:{click:function(s){return s.stopPropagation(),t.handleEmpty(e.targetId,e.type)}}},[a("img",{attrs:{src:s("78a4"),alt:""}})]),a("p",{staticClass:"gd-chatIm-left-title"},[0==t.msgCount?a("span"):t._e(),a("span",[t._v(t._s(e.latestMessage.content.content))])])])])})),0)]),a("content-item",{attrs:{chatMsgShow:t.chatMsgShow,chatUserTarget:t.chatUserTarget,chatUserSelected:t.chatUserSelected},on:{change:t.handleInfoShow}}),a("audio",{ref:"audio",attrs:{controls:"controls",hidden:"",src:s("9359")}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.infoShow,expression:"infoShow"}],staticClass:"gd-chatIm-right-b"},[a("p",{staticStyle:{display:"flex","justify-content":"flex-end",margin:"10px 10px"}},[a("i",{staticClass:"el-icon-close",on:{click:function(e){e.stopPropagation(),t.infoShow=!1}}})]),a("group-info",{attrs:{msgGroupInfo:t.msgGroupInfo,groupInfo:t.groupInfo}})],1),t.dialogVisible?a("div",{staticClass:"gd-dislog-main"},[a("p",{staticStyle:{"font-size":"13px",color:"#666"}},[t._v("搜索好友 "),a("i",{staticClass:"el-icon-close",on:{click:function(e){t.dialogVisible=!1}}})]),a("el-form",{ref:"form",attrs:{model:t.form}},[a("el-form-item",[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitSearch("form")}}},[t._v("搜索")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.dialogInfoVisible,expression:"dialogInfoVisible"}],staticStyle:{width:"100%"}},[a("p",{staticStyle:{width:"100%","text-align":"left",margin:"0px","font-size":"13px",color:"#666"}},[t._v("好友信息")]),a("div",{staticClass:"gd-dislog-main-info"},[a("p",{staticStyle:{width:"auto","line-height":"53px"}},[a("img",{attrs:{src:t.addUserInfo.headAddr,onerror:"this.src='https://dss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=3491929439,4106440758&fm=26&gp=0.jpg'",alt:""}}),t._v(t._s(t.addUserInfo.nickname)+" ")])]),a("el-form",{ref:"form",staticStyle:{width:"100%",display:"flex","flex-direction":"column"},attrs:{model:t.form}},[a("p",{staticStyle:{width:"100%","text-align":"left",margin:"0px","font-size":"13px",color:"#666"}},[t._v("验证信息")]),a("el-form-item",{staticClass:"gd-el-form-item"},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入验证消息"},model:{value:t.form.verifyMsg,callback:function(e){t.$set(t.form,"verifyMsg",e)},expression:"form.verifyMsg"}})],1)],1),a("el-button",{staticStyle:{padding:"3px",width:"80px"},attrs:{type:"primary"},on:{click:function(e){return t.submitFriendForm()}}},[t._v("添加好友 ")])],1)],1):t._e(),a("add-groups",{attrs:{dialogGroup:t.dialogGroup}})],1)},n=[],o=s("5530"),i=s("46a5"),r=s("1157"),c=s.n(r),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"gd-el-dialog-main"},[s("el-dialog",{attrs:{title:"请勾选需要添加的联系人",visible:t.dialogGroup,width:"60%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogGroup=e}}},[s("div",{staticStyle:{"text-align":"center"}},[s("el-transfer",{staticStyle:{"text-align":"left",display:"inline-block"},attrs:{filterable:"","render-content":t.renderFunc,titles:["Source","Target"],"button-texts":["删除","添加"],format:{noChecked:"${total}",hasChecked:"${checked}/${total}"},data:t.generateData},on:{change:t.handleChange},model:{value:t.options,callback:function(e){t.options=e},expression:"options"}})],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[s("el-form-item",{attrs:{label:"群组名称"}},[s("el-input",{model:{value:t.form.groupName,callback:function(e){t.$set(t.form,"groupName",e)},expression:"form.groupName"}})],1)],1),s("div",[s("el-button",{on:{click:function(e){t.dialogGroup=!1}}},[t._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:t.handleSendGroup}},[t._v("确 定")])],1)],1)])],1)},d=[],g=(s("d81d"),s("2f62")),h={name:"addGroups",props:{dialogGroup:Boolean},computed:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(g["d"])(["userInfo"])),Object(g["d"])("rongIm",["rongUser","rongMessage","rongConversation","conversationUser"])),{},{chatFriendList:function(){return this.rongUser.addressBook},generateData:function(){var t=[];return this.chatFriendList.map((function(e){t.push({key:e.rcId,label:e.nickname,disabled:e.disabled})})),t}}),data:function(){this.$createElement;return{form:{groupName:""},options:[],renderFunc:function(t,e){return t("span",[" ",e.label," "])}}},methods:{handleChange:function(t,e,s){console.log(t)},handleSendGroup:function(){var t={name:"花开了",rcIdList:this.options};""!=this.form.groupName?this.options.length<3?this.$message.error("请选择3个以上联系人"):this.$ajax.rongCloud.createGroup(t):this.$message.error("请输入群组名称")},handleClose:function(t){this.$confirm("确认关闭？").then((function(e){t()})).catch((function(t){}))}},created:function(){}},u=h,m=(s("dedd"),s("2877")),p=Object(m["a"])(u,l,d,!1,null,null,null),f=p.exports,v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[0!==t.groupInfo.length?s("div",{staticClass:"gd-group-info-main"},[s("div",{staticClass:"gd-group-info-flex"},[t._m(0),t._l(t.groupInfo,(function(e){return s("p",{staticClass:"gd-group-info-p"},[s("img",{attrs:{src:e.headAddr,alt:""}}),s("span",[t._v(t._s(e.nickname))])])}))],2),t._m(1),t._m(2),s("p",{staticClass:"gd-group-info-remove"},[t._v("删除并退出")])]):t._e()])},I=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",{staticClass:"gd-group-info-p gd-group-info-ps"},[s("span",{staticClass:"icon iconfont gd-group-info-icon"},[t._v("")]),s("span",[t._v("添加")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",{staticClass:"gd-group-info-name"},[s("span",[t._v("群名")]),s("span")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",{staticClass:"gd-group-info-name"},[s("span",[t._v("群公告")]),s("span")])}],b=(s("96cf"),s("1da1")),y={name:"groupInfo",props:{groupInfo:Array,msgGroupInfo:Object},data:function(){return{groupInfoList:[]}},methods:{handleGroupInfo:function(){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$ajax.rongCloud.getGroupInfoList(t.groupInfo.targetId);case 3:s=e.sent,t.groupInfoList=s.result,console.log("oc",t.groupInfoList),e.next=10;break;case 8:e.prev=8,e.t0=e["catch"](0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))()}},created:function(){console.log("群组信息",this.groupInfo),this.handleGroupInfo()}},C=y,S=(s("7482"),Object(m["a"])(C,v,I,!1,null,null,null)),w=S.exports,U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[0==!t.chatUserList.length?a("div",{directives:[{name:"show",rawName:"v-show",value:t.chatMsgShow,expression:"chatMsgShow"}],staticClass:"gd-chatIm-right"},[a("div",{staticClass:"gd-chatIm-right-top"},[3==t.chatUserTarget.type?a("div",{staticClass:"gd-chatIm-right-title"},[t._v(" "+t._s(t.chatUserTarget.latestMessage.content.user.id)+" "),a("p",[t._v(t._s(t.chatUserTarget.latestMessage.content.user.name))]),a("p",[t._v("企业签名引入位置")])]):a("div",{staticClass:"gd-chatIm-right-title"},[t._v(" "+t._s(t.userData&&t.userData[t.conversationUser]&&t.userData[t.conversationUser].rcId)+" "),a("p",[t._v(t._s(t.userData&&t.userData[t.conversationUser]&&t.userData[t.conversationUser].name))]),a("p",[t._v("企业签名引入位置")])]),a("div",{staticStyle:{width:"40%",display:"flex","justify-content":"flex-end","align-items":"center"}},[a("span",{staticClass:"icon iconfont",staticStyle:{"font-size":"20px","margin-right":"20px",cursor:"pointer"},on:{click:t.handleAddFriend}},[t._v("")]),a("div",{staticStyle:{"margin-top":"5px",cursor:"pointer"},on:{click:function(e){return e.stopPropagation(),t.handleCollect(e)}}},[t.showCollect?a("span",{staticClass:"icon iconfont",staticStyle:{"font-size":"25px"}},[t._v("")]):t._e(),t.showCollect?t._e():a("span",{staticClass:"icon iconfont",staticStyle:{"font-size":"25px",color:"#FF7A46"}},[t._v("")])]),a("span",{staticClass:"icon iconfont",staticStyle:{"margin-left":"20px",cursor:"pointer"},on:{click:function(e){return e.stopPropagation(),t.handleMore(e)}}},[t._v("")])])]),a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"聊天",name:"0"}},[a("div",{ref:"middle",staticClass:"gd-chart-center middle",attrs:{id:"middle"}},[t.hasMore?a("p",{staticClass:"gd-chart-history",on:{click:function(e){return t.handleHistoryMore(t.chatUserSelected)}}},[t._v("加载历史消息")]):a("div",{staticStyle:{"text-align":"center",color:"#aaaaaa"}},[t._v("———— 无历史消息 ————")]),t._l(t.messageList,(function(e,s){return a("div",{key:s,staticClass:"gd-chart-row"},[a("div",{staticClass:"gd-chart-time"},[a("p",[t._v(t._s(t._f("formatDate")(e.sentTime)))])]),1==e.messageDirection?a("div",{staticClass:"gd-chart-ofe"},["RC:ImgMsg"==e.messageType?a("p",{staticClass:"gd-chart-p gd-chart-pr",on:{click:function(s){return t.handlePreview(e.content.imageUri)}}},[a("span",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{"element-loading-background":"rgba(0, 0, 0, 0)"}}),a("img",{staticStyle:{width:"80px",height:"80px","border-radius":"0px"},attrs:{src:e.content.content,alt:""}})]):"RC:SightMsg"==e.messageType?a("p",{staticClass:"gd-chart-p gd-chart-pr",staticStyle:{width:"240px"}},[a("video",{attrs:{width:"240",height:"240",controls:""}},[a("source",{attrs:{src:"item.content.sightUrl"}})])]):"RC:GIFMsg"==e.messageType?a("p",{staticClass:"gd-chart-p gd-chart-pr",on:{click:function(s){return t.handlePreview(e.content.remoteUrl)}}},[a("img",{staticStyle:{width:"80px",height:"80px","border-radius":"0px"},attrs:{src:e.content.remoteUrl,alt:""}})]):"RC:VcMsg"==e.messageType?a("p",{staticClass:"gd-chart-p gd-chart-pr"},[a("audio",{staticStyle:{width:"112px"},attrs:{controls:"controls"}},[a("source",{attrs:{src:"data:application/x-authoware-map;base64,"+e.content.content}})])]):a("p",{staticClass:"gd-chart-p gd-chart-pr"},[t._v(t._s(e.content.content))]),a("img",{attrs:{src:e.content.user.portrait,onerror:"this.src='https://dss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=3491929439,4106440758&fm=26&gp=0.jpg'"}})]):t._e(),2==e.messageDirection?a("div",{staticClass:"gd-chart-ofo"},[a("img",{attrs:{src:e.content.user.portrait,onerror:"this.src='https://dss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=3491929439,4106440758&fm=26&gp=0.jpg'"}}),"RC:ImgMsg"==e.messageType?a("p",{staticClass:"gd-chart-p gd-chart-pr",on:{click:function(s){return t.handlePreview(e.content.imageUri)}}},[a("img",{staticStyle:{width:"80px",height:"80px","border-radius":"0px"},attrs:{src:e.content.imageUri,alt:""}})]):"RC:SightMsg"==e.messageType?a("p",{staticClass:"gd-chart-p gd-chart-pr",staticStyle:{width:"240px"}},[a("video",{attrs:{width:"240",height:"240",controls:""}},[a("source",{attrs:{src:"item.content.sightUrl"}})])]):"RC:GIFMsg"==e.messageType?a("p",{staticClass:"gd-chart-p gd-chart-pr",on:{click:function(s){return t.handlePreview(e.content.remoteUrl)}}},[a("img",{staticStyle:{width:"80px",height:"80px","border-radius":"0px"},attrs:{src:e.content.remoteUrl,alt:""}})]):"RC:VcMsg"==e.messageType?a("p",{staticClass:"gd-chart-p gd-chart-pr"},[a("audio",{staticStyle:{width:"112px"},attrs:{controls:"controls"}},[a("source",{attrs:{src:"data:application/x-authoware-map;base64,"+e.content.content}})])]):a("p",{staticClass:"gd-chart-p gd-chart-pr",attrs:{id:"hj"}},[t._v(t._s(e.content.content))])]):t._e()])}))],2),a("el-dialog",{attrs:{visible:t.dialogvaurl},on:{"update:visible":function(e){t.dialogvaurl=e}}},[a("img",{attrs:{width:"100%",src:t.dialogUrl,alt:""}})]),a("div",{staticClass:"gd-chart-bottom"},[a("div",{staticClass:"gd-chart-icon"},[a("img",{attrs:{src:s("6159"),alt:""},on:{click:t.showEmojiPanel}}),a("div",{staticClass:"fileInput"},[a("img",{attrs:{src:s("44f4"),alt:""}}),a("input",{staticStyle:{width:"20px",opacity:"0"},attrs:{type:"file",id:"Updateimage",accept:"image/jpeg, image/png, image/jpg"},on:{change:function(e){return t.toBase64()}}})]),t.isShowEmojiPanel?a("emoji-panel",{attrs:{emojis:t.listEmojin},on:{emojiClick:t.appendEmoji}}):t._e()],1),a("form",{attrs:{action:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSend(e)},submit:function(e){return e.preventDefault(),t.handleSend()}}},[a("div",{staticClass:"gd-chart-text"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"gd-chart-text",staticStyle:{resize:"none"},attrs:{id:"textpanel",name:"desc",value:"",placeholder:"请输入，按Enter直接发送消息，Ctrl+Enter换行"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})]),a("div",{staticClass:"gd-chart-btn"},[a("button",{attrs:{type:"submit"}},[t._v("发送")])])])])],1),a("el-tab-pane",{attrs:{label:"合同",name:"1"}},[t._v("合同")]),a("el-tab-pane",{attrs:{label:"店铺",name:"2"}},[t._v("店铺")])],1)],1):t._e()])},_=[],M=(s("b0c0"),s("6180")),x=s("c466"),k=(s("ac2a"),Object(g["a"])("rongIm/message")),T=k.mapActions,j={name:"contentItem",props:{chatMsgShow:Boolean,chatUserSelected:String,chatUserTarget:Object},computed:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(g["d"])(["userInfo"])),Object(g["d"])("rongIm",["rongUser","rongMessage","rongConversation","conversationUser"])),{},{chatUserList:function(){return this.rongConversation.conversationList},messageList:function(){return this.rongMessage.messageData["".concat(this.conversationUser)]},userData:function(){return this.rongUser.vuexUserData},rongUserInfo:function(){return this.rongUser.rongUser}}),components:{EmojiPanel:M["a"]},filters:{formatDate:function(t){var e=new Date(t);return Object(x["a"])(e,"MM-dd hh:mm")}},data:function(){return{hasMore:!1,msgType:0,groupInfo:[],infoShow:!1,dialogGroup:!1,modelDiog:!1,loading:!1,activeName:"0",dialogVisible:!1,dialogInfoVisible:!1,addUserInfo:{},isShowEmojiPanel:!1,showCollect:!0,historyMsg:"加载历史消息",dialogUrl:"",dialogvaurl:!1,chatUserSelf:{headAddr:"https://dss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3621869950,2480486393&fm=26&gp=0.jpg",nickname:"",username:this.$store.state.user.userInfo.rcId,password:this.$store.state.user.userInfo.hxPassWord},content:"",msgCount:0,newTrue:!0,msgDisplay:!1,form:{phone:"",verifyMsg:""},listEmojin:[],headImg:"",imageUrl:"",type:"",file:[],sentTime:0}},update:function(){this.handleGobottom()},methods:Object(o["a"])(Object(o["a"])({},T(["getMessage","getTotalSpecifiedCount","sendMessage"])),{},{handleMore:function(){this.infoShow=!0,console.log(this.infoShow),this.$emit("change",this.infoShow)},handleClick:function(t,e){console.log(t,e)},handleAddFriend:function(){this.dialogVisible=!0,this.modelDiog=!1},handleCollect:function(){this.showCollect=!this.showCollect},handlePreview:function(t){this.dialogUrl=t,this.dialogvaurl=!0},submitForm:function(t){var e=this;searchPhone(this.form.phone).then((function(t){e.$message(t.message),e.chatUserSelected=t.result.rcId,console.log("好友id",t.result.rcId),rongCloud(t.result.rcId).then((function(t){e.$message(t.message),e.chatUserList.push({targetId:e.chatUserSelected,latestMessage:{sentTime:(new Date).getTime(),content:{user:{id:e.chatUserSelected,name:t.result.nickname,portrait:t.result.headAddr}}}}),e.chatUserTarget={id:e.chatUserSelected,name:t.result.nickname,portrait:t.result.headAddr}}))})),console.log("添加好友列表",this.chatUserList),this.dialogVisible=!1},toBase64:function(){var t=this,e=document.querySelector("input[type=file]").files[0];this.file=e;var s=new FileReader;s.onloadend=function(){c()("#base64Img").attr("style","display:inline-block"),c()("#base64Img").attr("src",s.result),t.imageUrl=s.result,t.updataImg()},e&&s.readAsDataURL(e)},updataImg:function(){var t=this,e=RongIMLib.FILE_TYPE.IMAGE,s={domain:"http://upload.qiniu.com",fileType:e,getToken:function(t){i["a"].getFileToken(e).then((function(e){t(e.token,e)})).catch((function(t){console.log("获取上传 token 失败",t)}))}},a={onProgress:function(t,e){var s=Math.floor(t/e*100);console.log("已上传: ",s)},onCompleted:function(e){var s=RongIMLib.FILE_TYPE.IMAGE,a=(e.filename,e.name);i["a"].getFileUrl(s,e.filename,a).then((function(e){var s={targetId:t.chatUserSelected,type:RongIMLib.CONVERSATION_TYPE.PRIVATE},a={messageType:RongIMLib.MESSAGE_TYPE.IMAGE,content:{content:t.imageUrl,imageUri:e.downloadUrl,user:t.rongUserInfo},sentTime:+new Date,messageDirection:1};console.log("发送",a),t.handleGobottom(),t.sendMessage({target:s,message:a}).then((function(t){}))})).catch((function(t){console.log("获取文件 url 失败",t)}))},onError:function(t){console.error("上传失败",t)}},n=this.file;UploadClient.initImage(s,(function(t){t.upload(n,a)}))},emoji:function(t){var e=t.substring(1,t.length-1);return'<span class="emoji-item-common emoji-'.concat(e,' emoji-size-small" ></span>')},showEmojiPanel:function(){this.isShowEmojiPanel=!this.isShowEmojiPanel},appendEmoji:function(t){var e=document.getElementById("textpanel"),s=e.value+t;this.content=s,this.isShowEmojiPanel=!1},handleGobottom:function(){var t=this;t.$nextTick((function(){var t=document.getElementById("middle");t.scrollTop=t.scrollHeight}))},handleEmogi:function(){RongIMLib.RongIMEmoji.init();var t=RongIMLib.RongIMEmoji.list;this.listEmojin=t},handleSend:function(){var t=this,e=this,s=e.content;if(""!=s){var a={};console.log(this.chatUserTarget.type),1==this.chatUserTarget.type?a={targetId:this.chatUserSelected,type:RongIMLib.CONVERSATION_TYPE.PRIVATE}:3==this.chatUserTarget.type&&(a={targetId:this.chatUserSelected,type:RongIMLib.CONVERSATION_TYPE.GROUP});var n={messageType:RongIMLib.MESSAGE_TYPE.TEXT,content:{content:s,user:this.rongUserInfo},sentTime:+new Date,messageDirection:1};console.log("发送",n,a),e.handleGobottom(),this.sendMessage({target:a,message:n}).then((function(e){e&&(t.content="")}))}else this.$message.error("请输入内容")},handleHistoryMore:function(t){var e=this,s=this;if(this.rongMessage.messageData[t].length>20){var a=this.rongMessage.messageData[t].pop(),n=t,o={timestrap:a.sentTime,count:20};3==s.chatUserTarget.type?this.$store.dispatch("rongIm/message/getGroupMessage",{targetId:n,params:o}).then((function(t){t.list;e.hasMore=t.hasMore})):this.$store.dispatch("rongIm/message/getMessage",{targetId:n,params:o}).then((function(t){t.list;e.hasMore=t.hasMore}))}},handleHistory:function(){var t=this,e=this.chatUserList;e.map((function(e){t.$store.dispatch("rongIm/message/getTotalSpecifiedCount",e.targetId);var s=e.targetId,a={timestrap:t.rongMessage.messageData[e.targetId]?t.rongMessage.messageData[e.targetId].sentTime+1:+new Date,count:20};3==e.type?t.$store.dispatch("rongIm/message/getGroupMessage",{targetId:s,params:a}).then((function(e){e.list;t.hasMore=e.hasMore})):t.$store.dispatch("rongIm/message/getMessage",{targetId:s,params:a}).then((function(e){e.list;t.hasMore=e.hasMore}))}))}}),created:function(){var t=this;this.handleHistory(),t.handleEmogi(),this.conversationUser&&(this.chatMsgShow=!0),this.$route.query.idx&&(t.chatUserSelected=this.$route.query.idx)}},E=j,D=Object(m["a"])(E,U,_,!1,null,"888c1940",null),$=D.exports,G=s("ad8f"),L=s("c24f"),O=Object(g["a"])("rongIm/message"),A=O.mapActions,P={computed:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(g["d"])(["userInfo"])),Object(g["d"])("rongIm",["rongUser","rongMessage","rongConversation","conversationUser"])),{},{chatUserList:function(){return this.rongConversation.conversationList},messageList:function(){return this.rongMessage.messageData["".concat(this.conversationUser)]},userData:function(){return this.rongUser.vuexUserData},rongUserInfo:function(){return this.rongUser.rongUser},targetCount:function(){return this.rongMessage.targetCount},newMsg:function(){return this.rongMessage.newMsg},unreadMessageCount:function(){return this.rongMessage.unreadMessageCount}}),components:{addGroups:f,groupInfo:w,contentItem:$},filters:{formatDate:function(t){var e=new Date(t);return Object(x["a"])(e,"MM-dd hh:mm")}},watch:{},data:function(){return{imgError:"https://dss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=3491929439,4106440758&fm=26&gp=0.jpg",msgGroupInfo:{},groupInfo:[],infoShow:!1,dialogGroup:!1,chatMsgShow:!1,modelDiog:!1,loading:!1,activeName:"0",dialogVisible:!1,dialogInfoVisible:!1,addUserInfo:{},isShowEmojiPanel:!1,dialogUrl:"",dialogvaurl:!1,chatUserSelected:"",chatUserTarget:{},content:"",msgCount:0,newTrue:!0,msgDisplay:!1,form:{phone:"",verifyMsg:""},sentTime:0}},methods:Object(o["a"])(Object(o["a"])({},A(["getMessage","getTotalSpecifiedCount","sendMessage"])),{},{handleInfoShow:function(){this.infoShow=!0},handleAdd:function(){this.modelDiog=!this.modelDiog},handleAddGroup:function(){this.dialogGroup=!0,this.modelDiog=!1},handleAddFriend:function(){this.dialogVisible=!0,this.modelDiog=!1},submitFriendForm:function(t){var e=this;try{Object(G["c"])({receiptId:this.addUserInfo.rcId,sendId:this.userInfo.rcId,receiptHeadAddr:this.addUserInfo.headAddr,receiptNickname:this.addUserInfo.nickname,sendHeadAddr:this.rongUserInfo.portrait,sendNickname:this.rongUserInfo.nickname,greetSb:this.form.verifyMsg}).then((function(t){e.$message(t.message),e.dialogVisible=!1}))}catch(s){e.$message(res.message)}},submitSearch:function(){var t=this,e=this;Object(G["t"])(this.form.phone).then((function(s){e.$message(s.message),e.addUserInfo=s.result,console.log("好友id",s.result.rcId),t.dialogInfoVisible=!0}))},submitForm:function(t){var e=this;Object(G["t"])(this.form.phone).then((function(t){e.$message(t.message),e.chatUserSelected=t.result.rcId,console.log("好友id",t.result.rcId),Object(L["g"])(t.result.rcId).then((function(t){e.$message(t.message),e.chatUserList.push({targetId:e.chatUserSelected,latestMessage:{sentTime:(new Date).getTime(),content:{user:{id:e.chatUserSelected,name:t.result.nickname,portrait:t.result.headAddr}}}}),e.chatUserTarget={id:e.chatUserSelected,name:t.result.nickname,portrait:t.result.headAddr}}))})),console.log("添加好友列表",this.chatUserList),this.dialogVisible=!1},handleHide:function(){this.chartShow=!1},handleEmpty:function(t,e){console.log(e),1==e?this.$store.dispatch("rongIm/conversation/getRemoveConversationList",t):3==e&&this.$store.dispatch("rongIm/conversation/getRemoveGroupList",t)},handleGobottom:function(){var t=this;t.$nextTick((function(){var t=document.getElementById("middle");t.scrollTop=t.scrollHeight}))},handleSwitch:function(t,e,s){this.$store.dispatch("rongIm/conversation/switchConversation",e),this.msgDisplay=!0;var a=this;a.chatMsgShow=!0,a.chatUserSelected=e,a.chatUserTarget=s,Object(G["h"])(t.targetId).then((function(t){a.groupInfo=t.result})),a.msgGroupInfo=t,void 0==s&&(a.chatUserTarget=t),a.$nextTick((function(){var t=document.getElementById("middle");t.scrollTop=t.scrollHeight})),e==a.chatUserSelected?this.$store.dispatch("rongIm/message/removeSpecifiedCount",e):a.newTrue=!0},handleSend:function(){var t=this,e=this,s=e.content;if(""!=s){var a={targetId:this.chatUserSelected,type:RongIMLib.CONVERSATION_TYPE.PRIVATE},n={messageType:RongIMLib.MESSAGE_TYPE.TEXT,content:{content:s,user:this.rongUserInfo},sentTime:+new Date,messageDirection:1};console.log("发送",n,a),e.handleGobottom(),this.sendMessage({target:a,message:n}).then((function(e){e&&(t.content="")}))}else this.$message.error("请输入内容")},appendMessage:function(t,e){if(1==e.flag){var s=this.chatMessageList[t];s||(s=new Array),s.unshift(e),this.$set(this.chatMessageList,t,s)}else{var a=this.chatMessageList[t];a||(a=new Array),a.push(e),this.$set(this.chatMessageList,t,a)}},handleChart:function(){this.userInfo.userId?this.chartShow=!this.chartShow:(this.chartShow=!1,this.$message({message:"请先登录",type:"error",duration:3e3}))}}),created:function(){var t=this;console.log("跳转列表",this.chatUserList),this.conversationUser&&(this.chatMsgShow=!0),this.$route.query.idx&&(t.chatUserSelected=this.$route.query.idx)},mounted:function(){document.querySelector("body").setAttribute("style","background: #eee; overflow-x: hidden;")},beforeDestroy:function(){document.querySelector("body").removeAttribute("style")}},F=P,R=(s("ebf8"),Object(m["a"])(F,a,n,!1,null,null,null));e["default"]=R.exports},7482:function(t,e,s){"use strict";var a=s("0753"),n=s.n(a);n.a},"82ef":function(t,e,s){},9359:function(t,e,s){t.exports=s.p+"static/media/test.72ac0264.mp3"},ac2a:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login-main"},[s("div",{staticClass:"gd-login-main"},[s("div",{staticClass:"gd-login-row"},[s("div",{staticClass:"gd-home-login"},[s("login-content",{on:{afterLogin:t.afterLogin}})],1)])])])},n=[],o=s("9533"),i={name:"Login",components:{LoginContent:o["a"]},data:function(){return{}},created:function(){},methods:{afterLogin:function(){this.$route.query.redirect?this.$router.path(this.$route.query.redirect):this.$router.push({name:"Index"})}}},r=i,c=(s("1439"),s("2877")),l=Object(c["a"])(r,a,n,!1,null,null,null);e["default"]=l.exports},dedd:function(t,e,s){"use strict";var a=s("03b7"),n=s.n(a);n.a},ebf8:function(t,e,s){"use strict";var a=s("82ef"),n=s.n(a);n.a}}]);